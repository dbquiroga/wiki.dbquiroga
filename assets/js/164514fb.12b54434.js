"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2236],{5680:(e,a,r)=>{r.d(a,{xA:()=>u,yg:()=>y});var n=r(6540);function t(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function o(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach((function(a){t(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,n,t=function(e,a){if(null==e)return{};var r,n,t={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],a.indexOf(r)>=0||(t[r]=e[r]);return t}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var s=n.createContext({}),c=function(e){var a=n.useContext(s),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},u=function(e){var a=c(e.components);return n.createElement(s.Provider,{value:a},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},g=n.forwardRef((function(e,a){var r=e.components,t=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(r),g=t,y=p["".concat(s,".").concat(g)]||p[g]||m[g]||o;return r?n.createElement(y,i(i({ref:a},u),{},{components:r})):n.createElement(y,i({ref:a},u))}));function y(e,a){var r=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var o=r.length,i=new Array(o);i[0]=g;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[p]="string"==typeof e?e:t,i[1]=l;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}g.displayName="MDXCreateElement"},6862:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=r(8168),t=(r(6540),r(5680));const o={sidebar_position:15,title:"Testear codigos de verificacion de email con mailosaur"},i=void 0,l={unversionedId:"qa-automation/Cypress/email_mailosaur",id:"qa-automation/Cypress/email_mailosaur",title:"Testear codigos de verificacion de email con mailosaur",description:"Hace poco me cruce con una prueba t\xe9cnica donde tenia que verificar un c\xf3digo para crear una cuenta.",source:"@site/docs/qa-automation/Cypress/16.email_mailosaur.md",sourceDirName:"qa-automation/Cypress",slug:"/qa-automation/Cypress/email_mailosaur",permalink:"/wiki.dbquiroga/docs/qa-automation/Cypress/email_mailosaur",draft:!1,editUrl:"https://github.com/dbquiroga/wiki.dbquiroga/edit/main/docs/qa-automation/Cypress/16.email_mailosaur.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{sidebar_position:15,title:"Testear codigos de verificacion de email con mailosaur"},sidebar:"tutorialSidebar",previous:{title:"Usando cy.session()",permalink:"/wiki.dbquiroga/docs/qa-automation/Cypress/cy_session"},next:{title:"QA - Manual",permalink:"/wiki.dbquiroga/docs/category/qa---manual"}},s={},c=[{value:"C\xf3mo empezar",id:"c\xf3mo-empezar",level:2}],u={toc:c},p="wrapper";function m(e){let{components:a,...o}=e;return(0,t.yg)(p,(0,n.A)({},u,o,{components:a,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"Hace poco me cruce con una prueba t\xe9cnica donde tenia que verificar un c\xf3digo para crear una cuenta."),(0,t.yg)("p",null,"Encontre la opcion ",(0,t.yg)("a",{parentName:"p",href:"https://mailosaur.com/"},"Mailosaur")),(0,t.yg)("h2",{id:"c\xf3mo-empezar"},"C\xf3mo empezar"),(0,t.yg)("p",null,"Lo primero que hice fue armar los pasos donde el usuario ingresaria los datos del usuario para crear una cuenta."),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Click click, hasta enviar el boton de verificar c\xf3digo"))),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-jsx"},"it('Send confirmation code', () =>{\n    cy.get(#name).type(faker.person.firstName());\n    cy.setRandomCountry();\n    cy.get(#phone).type(faker.phone.number());\n    cy.get(#email).type(email);\n    cy.get(#pass).type(faker.internet.password({ length: 20 }));\n    cy.get(#verifyEmailBtn).should(\"be.visible\").click();\n})\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"En mi caso use la libreria ",(0,t.yg)("a",{parentName:"strong",href:"https://fakerjs.dev/"},"faker")," para generar datos random, y realistas")," "),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Alt text",src:r(870).A,width:"420",height:"496"})),(0,t.yg)("ol",{start:2},(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Configurar mailosaur"))),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Instalar mailosaur")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"npm install cypress-mailosaur --save-dev\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Agregar el command\nEn commands.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="support/commands.js"',title:'"support/commands.js"'},"import 'cypress-mailosaur'\n")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Ir al dashboard de mailosaur",(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},'Crear nuevo server "Create server"'),(0,t.yg)("li",{parentName:"ul"},'Colocarle un nombre "verify Email"'),(0,t.yg)("li",{parentName:"ul"},"Copiar API KEY")))),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Alt text",src:r(7975).A,width:"1904",height:"849"})),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Clocar la api key en cypress.json\nCrear nuevas variables de ambiente. ")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="cypress.json"',title:'"cypress.json"'},'{\n    "env": {\n        "MAILOSAUR_API_KEY": "YuPrde3zNvANPkZ"\n    }\n}\n')),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Crear el test")),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"El serverId y sevrver DOman sacarlo desde el dashboard de dmailosaur.")),(0,t.yg)("ol",{start:3},(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Se envia el email... \xa1A capturarlo!"))),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-jsx"},"const serverId = 'xi8797'\nconst serverDomain= '@xi8797.mailosaur.net'\nconst email = 'password-reset@' + serverDomain\n\nit('Send confirmation code', () =>{\n    cy.visit('https://')\n    cy.get(#name).type(faker.person.firstName());\n    cy.setRandomCountry();\n    cy.get(#phone).type(faker.phone.number());\n    cy.get(#email).type(email);\n    cy.get(#pass).type(faker.internet.password({ length: 20 }));\n    cy.get(#verifyEmailBtn).should(\"be.visible\").click();\n\n    cy.mailosaurGetMessage(serverId,{\n        sentTo: email\n    }).then((message) => {\n     // Obtener el c\xf3digo OTP del correo electr\xf3nico usando expresi\xf3n regular\n        const otpCodeMatch =\n          /<p.*?style=\".*?background:#5bac3a;.*?font-size:24px;.*?letter-spacing:4px;\">(.*?)<\\/p>/.exec(\n            message.html.body\n          );\n        if (otpCodeMatch && otpCodeMatch.length >= 2) {\n          const otpCode = otpCodeMatch[1];\n          return otpCode;\n        } else {\n          return null;\n        }\n    });\n});\n")),(0,t.yg)("p",null,"*En mi caso tuve que usar una expresion regular porque el codigo no era un link, lo guarde y lo retorne. "),(0,t.yg)("p",null,"Este es mi ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/dbquiroga/cy_tutorialspoint"},"repo original"),", en realidad use cucumber y POM, pero la idea es masomenos la misma, cualquier duda porfa escibime en Discord Uusername: dbquiroga."))}m.isMDXComponent=!0},7975:(e,a,r)=>{r.d(a,{A:()=>n});const n=r.p+"assets/images/image-2-5280eae14e7bc2059036108d58ba1186.png"},870:(e,a,r)=>{r.d(a,{A:()=>n});const n=r.p+"assets/images/image-5146760b87b0fb073b6031e1e08dbfd2.png"}}]);