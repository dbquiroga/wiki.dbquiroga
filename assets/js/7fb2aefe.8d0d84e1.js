"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[205],{5680:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>m});var a=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),p=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(i.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},y=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(n),y=o,m=c["".concat(i,".").concat(y)]||c[y]||d[y]||s;return n?a.createElement(m,r(r({ref:t},u),{},{components:n})):a.createElement(m,r({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,r=new Array(s);r[0]=y;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[c]="string"==typeof e?e:o,r[1]=l;for(var p=2;p<s;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}y.displayName="MDXCreateElement"},9032:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>p});var a=n(8168),o=(n(6540),n(5680));const s={sidebar_position:13,title:"API Testing con Cypress"},r=void 0,l={unversionedId:"qa-automation/Cypress/api",id:"qa-automation/Cypress/api",title:"API Testing con Cypress",description:"Metodos de cypress",source:"@site/docs/qa-automation/Cypress/14.api.md",sourceDirName:"qa-automation/Cypress",slug:"/qa-automation/Cypress/api",permalink:"/wiki.dbquiroga/docs/qa-automation/Cypress/api",draft:!1,editUrl:"https://github.com/dbquiroga/wiki.dbquiroga/edit/main/docs/qa-automation/Cypress/14.api.md",tags:[],version:"current",sidebarPosition:13,frontMatter:{sidebar_position:13,title:"API Testing con Cypress"},sidebar:"tutorialSidebar",previous:{title:"Reportes",permalink:"/wiki.dbquiroga/docs/qa-automation/Cypress/reportes"},next:{title:"Usando cy.session()",permalink:"/wiki.dbquiroga/docs/qa-automation/Cypress/cy_session"}},i={},p=[{value:"Metodos de cypress",id:"metodos-de-cypress",level:2},{value:"Request",id:"request",level:3},{value:"Slice",id:"slice",level:3},{value:"Peticiones POST",id:"peticiones-post",level:2},{value:"Setear un valor en el local storage",id:"setear-un-valor-en-el-local-storage",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,o.yg)(c,(0,a.A)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h2",{id:"metodos-de-cypress"},"Metodos de cypress"),(0,o.yg)("h3",{id:"request"},"Request"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx"},"cy.request\n")),(0,o.yg)("p",null,"Es un metodo de cypress que nos permite realizar peticiones. Ya sean peticiones a una API o con GraphQL"),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"GraphQL\nEs un lenguaje de consulta y manipulaci\xf3n de datos para APIs, y un entorno de ejecuci\xf3n para realizar consultas con datos existentes.\u200b")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Ejemplo consulta api get"',title:'"Ejemplo',consulta:!0,api:!0,'get"':!0},"cy.request('http://localhost:3000/posts/').then(respuesta =>{\n    cy.log(respuesta)\n    expect(respuesta.body[0].id)to.be.equal(1);\n    expect(respuesta.status)to.be.equal(200);\n})\n")),(0,o.yg)("p",null,"cypress por default todas las peticiones que sean como la de arriba van a ser de tipo GET."),(0,o.yg)("p",null,"Para especificar peticiones, lo que tenemos que hacer es pasar un objeto como parametro, en el objeto tenemos que pasar propiedades y valores. "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Ejemplo consulta api get pasando un objeto"',title:'"Ejemplo',consulta:!0,api:!0,get:!0,pasando:!0,un:!0,'objeto"':!0},"cy.request({\n    url: \"http://localhost:3000/posts/?\",\n    method: 'GET'\n}).then(respuesta =>{\n    cy.log(respuesta)\n    expect(respuesta.body[0].id)to.be.equal(1);\n    expect(respuesta.status)to.be.equal(200);\n})\n")),(0,o.yg)("p",null,"Esta manera nos brinda la posibilidad de agregar parametros"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Ejemplo consulta api get pasando un objeto con parametros"',title:'"Ejemplo',consulta:!0,api:!0,get:!0,pasando:!0,un:!0,objeto:!0,con:!0,'parametros"':!0},"cy.request({\n    url: \"http://localhost:3000/posts/?\",\n    method: 'GET'\n    qs:{\n        id: '1'\n    }\n}).then(respuesta =>{\n    cy.log(respuesta)\n    expect(respuesta.body[0].id)to.be.equal(1);\n    expect(respuesta.status)to.be.equal(200);\n})\n")),(0,o.yg)("p",null,"Podemos agregar headers, body, _order, _sort, etc,etc...."),(0,o.yg)("h3",{id:"slice"},"Slice"),(0,o.yg)("p",null,"Indicamos de donde hasta donde filtra en un indice. "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Slice"',title:'"Slice"'},"cy.request({\n    url: \"http://localhost:3000/posts/?\",\n    method: 'GET'\n    qs:{\n        _start: '5',\n        _end: '11'\n    }\n}).then(respuesta =>{\n    cy.log(respuesta)\n    expect(respuesta.body[0].id)to.be.equal(1);\n    expect(respuesta.status)to.be.equal(200);\n})\n")),(0,o.yg)("p",null,"Empieza desde el indice 5 al 10. Como es confuso es preferible usar rangos. "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Rangos"',title:'"Rangos"'},"cy.request({\n    url: \"http://localhost:3000/posts/?\",\n    method: 'GET'\n    qs:{\n        id_gte: '5',\n        id_lte: '11'\n    }\n}).then(respuesta =>{\n    cy.log(respuesta)\n    expect(respuesta.body[0].id)to.be.equal(1);\n    expect(respuesta.status)to.be.equal(200);\n})\n")),(0,o.yg)("p",null,"De esta forma filtramos documentos por rangos en los ids. "),(0,o.yg)("p",null,"Podemos tambien elegir que documentos queremos que nos excluya"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"   qs:{\n        id_ne: ['5','11'],\n    }\n")),(0,o.yg)("p",null,"Si queremos excluir mas documentos podemos hacerlo en forma de array"),(0,o.yg)("h2",{id:"peticiones-post"},"Peticiones POST"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Rangos"',title:'"Rangos"'},"const numero = Math.floor(Math.random()*1000)\nconst id = numero\nconst titulo = `Titulo ${numero}`,\nconst author = 'Day'\n\ncy.request({\n    url: \"http://localhost:3000/posts/?\",\n    method: 'POST',\n    body: {\n        id : id,\n        title: titulo,\n        author: author\n    }\n}).then(respuesta =>{\n    expect(respuesta.status)to.be.equal(201)\n    expect(respuesta.body.id)to.be.equal(numero)\n    expect(respuesta.body)to.be.eql({\n        id : id,\n        title: titulo,\n        author: author\n\n    })\n    expect(respuesta.body.id)to.have.keys('id', 'title', 'author')\n})\n")),(0,o.yg)("h2",{id:"setear-un-valor-en-el-local-storage"},"Setear un valor en el local storage"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx"},"window.LocalStorage.setItem('token', respuesta.body.token)\nwindow.LocalStorage.setItem('user', respuesta.body.user.username)\n")))}d.isMDXComponent=!0}}]);